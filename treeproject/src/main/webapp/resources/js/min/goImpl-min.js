function goImpl(){var e=jQuery.getJSON("http://192.168.0.56:8080/tree/getTree/1000000",function(e){function o(e){document.getElementById("diagramEventsMsg").textContent=e}console.log(e);var a=go.GraphObject.make;myDiagram=a(go.Diagram,"myDiagram",{"toolManager.mouseWheelBehavior":go.ToolManager.WheelZoom,initialAutoScale:go.Diagram.Uniform,initialContentAlignment:go.Spot.Center,layout:a(go.ForceDirectedLayout),"commandHandler.copiesTree":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0,hasHorizontalScrollbar:!1,hasVerticalScrollbar:!1}),myDiagram.nodeTemplate=a(go.Node,"Spot",{selectionObjectName:"PANEL",isTreeExpanded:!1,isTreeLeaf:!1,click:function(e,o){console.log(myDiagram.model.getCategoryForNodeData(o.part.data)),setKeyword(o.part.data)}},new go.Binding("isShadowed","isSelected").ofObject(),{selectionAdorned:!1,shadowOffset:new go.Point(0,0),shadowBlur:15,shadowColor:"blue"},a(go.Panel,"Auto",{name:"PANEL"},a(go.Shape,"Circle",{fill:"whitesmoke",stroke:"black",strokeWidth:2},new go.Binding("fill","color")),a(go.TextBlock,{font:"12pt sans-serif",editable:!0,margin:2,isMultiline:!1,wrap:go.TextBlock.WrapFit},new go.Binding("text","keyword"))),a("TreeExpanderButton",{alignment:go.Spot.TopRight,alignmentFocus:go.Spot.Center,click:function(e,o){var a=o.part;if(null!==a){e.handled=!0;var t=a.diagram;t.startTransaction("	");var n=a.data;if(0==n.collapse){t.model.setDataProperty(n,"collapse",1);var i=createSubTree(n);0===i&&(o.visible=!1),console.log(myDiagram.model.toJson())}a.isTreeExpanded=!a.isTreeExpanded,t.commitTransaction("CollapseExpandTree")}}}),a(go.Picture,{alignment:go.Spot.TopLeft,maxSize:new go.Size(15,15),source:"resources/img/tree1.png",click:function(e,o){o.visible=!1}})),myDiagram.model=new go.TreeModel([{key:0,keyword:"키워드",color:"lightgreen",collapse:0}]),myDiagram.layoutDiagram(!0),myDiagram.model=go.Model.fromJson(e.Tree),myDiagram.model.addChangedListener(function(e){if(e.isTransactionFinished){var o=e.object;o instanceof go.Transaction&&console&&(console.log(o.toString()),o.changes.each(function(e){e.model&&console.log("  "+e.toString())}))}}),myDiagram.addDiagramListener("TextEdited",function(e){}),allExpanded(),myDiagram.toolManager.textEditingTool.defaultTextEditor=createInput(),diagram.addDiagramListener("ObjectSingleClicked",function(e){var a=e.subject.part;a instanceof go.Link||o("Clicked on "+a.data.key)}),diagram.addDiagramListener("BackgroundDoubleClicked",function(e){o("Double-clicked at "+e.diagram.lastInput.documentPoint)}),diagram.addDiagramListener("ClipboardPasted",function(e){o("Pasted "+e.diagram.selection.count+" parts")}),diagram.addDiagramListener("SelectionDeleting",function(e){e.diagram.selection.count>1&&(e.cancel=!0,o("Cannot delete multiple selected parts"))})})}function createSubTree(e){function o(){document.getElementById("mySavedModel").value=myDiagram.model.toJson(),myDiagram.isModified=!1}function a(){myDiagram.model=go.Model.fromJson(document.getElementById("mySavedModel").value)}var t=1;myDiagram.nodes.count<=1&&(t+=1);for(var n=myDiagram.model,i=myDiagram.findNodeForData(e),r=0;t>r;r++){var l={key:n.nodeDataArray.length,keyword:"키워드",parent:e.key,collapse:0,color:go.Brush.randomColor()};n.addNodeData(l);var d=myDiagram.findNodeForData(l);d.location=i.location}return console.log(myDiagram.model.toJson()),t}function allExpanded(){for(var e=myDiagram.nodes;e.hasNext();)1==e.value.data.collapse&&(e.value.isTreeExpanded=!e.value.isTreeExpanded),console.log(e.value.data.everExpanded)}function createInput(){var e=document.getElementById("inputText");return e.onActivate=function(){e.style.visibility="";var o=e.textEditingTool.textBlock.text;e.value=o;var a=e.textEditingTool.textBlock.getDocumentPoint(go.Spot.TopLeft),t=e.textEditingTool.textBlock.getDocumentPoint(go.Spot.BottomRight),n=myDiagram.transformDocToView(a),i=myDiagram.transformDocToView(t);e.style.left=n.x+"px",e.style.top=n.y+"px",e.style.width=5+i.x-n.x+"px",e.style.height=5+i.y-n.y+"px",e.style.padding=1,e.style.fontSize=.6*(i.y-n.y)+"pt",e.style.fontSizeAdjust="0.58",e.style.display="block"},e.addEventListener("keydown",function(o){var a=o.which,t=e.textEditingTool;return null!==t?13==a?(t.acceptText(go.TextEditingTool.Enter),o.preventDefault(),!1):9==a?(t.acceptText(go.TextEditingTool.Tab),o.preventDefault(),!1):void(27===a&&(t.doCancel(),t.diagram&&t.diagram.focus())):void 0},!1),e}